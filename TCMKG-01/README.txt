# KG
中心性分析：
1.度中心性（Degree Centrality）：衡量一个节点与其他节点的直接连接数量。度中心性高的节点在网络中具有广泛的直接联系
2.接近中心性（Closeness Centrality）：衡量一个节点到其他所有节点的平均距离。接近中心性高的节点能够更快地到达网络中的其他节点
3.中介中心性（Betweenness Centrality）：衡量一个节点在所有最短路径中的重要性。中介中心性高的节点在网络中起到桥梁作用，连接着许多其他节点
4.特征向量中心性（Eigenvector Centrality）：衡量一个节点在网络中的影响力。特征向量中心性高的节点能够通过其连接的节点间接地
影响网络中的其他节点，考虑节点的连接质量，而不仅仅是数量。与高中心性节点相连的节点也会获得较高的中心性
5.PageRank：衡量一个节点在网络中的重要性，考虑了节点之间的连接和连接的权重。PageRank算法广泛应用于搜索引擎中，用于评估网页的重要性
7.中心性分析插件：
6.聚类系数（Clustering Coefficient）：衡量一个节点的邻居节点之间连接的紧密程度。聚类系数高的节点倾向于与具有相似邻居的节点连接在一起，形成紧密的社区

 1.度中心性分析插件：计算每个节点的度中心性，并显示在节点详情中
 2.接近中心性分析插件：计算每个节点的接近中心性，并显示在节点详情中
 3.中介中心性分析插件：计算每个节点的中介中心性，并显示在节点详情中
 4.特征向量中心性分析插件：计算每个节点的特征向量中心性，并显示在节点详情中
 5.PageRank分析插件：计算每个节点的PageRank值，并显示在节点详情中
 6.聚类系数分析插件：计算每个节点的聚类系数，并显示在节点详情中

regex101.com
数据清洗插件(data_cleaning_plugin.py)：
1. 启动插件
在主界面右侧插件列表中，找到 “数据清洗插件”（图标或名称）。
双击或点击 运行，即可弹出 “数据清洗配置” 对话框。
2. 模板管理（快速复用／批量配置）
加载已有模板
在对话框顶部 “模板” 下拉框中，展开已保存的配置名称列表。
选中一个模板名称，点击 加载，界面会立即填充该模板对应的内置选项、正则规则和映射表状态。
保存当前配置为新模板
在对话框中完成所有设置后，点击 另存模板。
弹出输入框，输入一个易记的模板名称（例如 “去除标点+合并空格”），点 确定。
系统会把当前所有选项、正则列表和映射表保存到 templates/ 目录，下拉列表也会立刻更新。
3. 内置清洗选项（勾选即可生效）
在“模板区”下方，按需勾选：
删除空属性：去掉所有值为空（None、""、空列表）的节点属性键；
标准化名称：自动去除节点名称首尾空白，并根据首字母大写规则格式化；
删除孤立节点：移除图中度为 0、未连接任何边的节点；
去重边：去除重复的源-目标-关系类型完全相同的多重边。
4. 自定义正则规则
点击 添加规则，弹出三个输入框，分别填写：
字段：选择对哪个字段生效（输入 name 表示节点名称，也可输入任意属性名）；
正则模式：JavaScript／Python 通用语法的正则表达式；
替换为：匹配到内容的替换文本，或使用 $1、\1 等引用分组。
填写完成后点 确定，规则就会以一行的形式加入表格。
如果想修改或删除某条规则，选中对应表格行，点击 编辑规则 或 删除规则 即可。
5. 映射表上传（批量替换）
点击 上传映射表，选择一个 JSON 或 CSV 文件：
JSON：格式为列表，每项 { "field": 字段名, "map": { 原值: 新值, … } }；
CSV：每行 old,new，默认作用于节点名称字段。
上传成功后，界面下方会显示文件名或已加载条目数。
映射表可同时包含多组字段映射，比如同时对 name、symptom 做不同的替换。
6. 执行清洗
确认左侧“内置选项”、中部“正则规则”、下方“映射表”都已配置好。
点击对话框底部的 确定。
插件会按照顺序依次执行：
内置清洗,正则替换,映射替换
完成后会弹出 “数据清洗已完成” 提示，同时自动保存到当前图谱文件。

多模态数据集成插件使用说明：
1.启动插件:在“插件管理”界面双击“多模态数据整合插件”
2.选择目标:左侧下拉框中选择要关联的“节点（N:节点名）”或“关系（E:源→目标）”。
下方列表会展示该对象已关联的资源。
3.添加新资源:右侧“资源类型”中选 Image/Diagram/PDF Abstract；
点击“浏览文件…”选取本地文件；
预览区显示缩略图后，点“添加关联”即可。
4.预览已关联资源:点击左侧资源列表中的条目，即可在预览区查看对应缩略图。
保存／取消
配置完成后点“确定”，插件会自动保存到图谱 JSON；
如想放弃修改，点击“取消”即可。

图谱分析插件 (Graph Analysis Plugin)
1. 启动插件
在主界面右侧插件列表中，找到 "图谱分析工具"
双击或点击 运行，弹出功能选择菜单
2. 节点度数统计
在功能菜单中点击 "节点度数统计"
系统自动计算所有节点的度数
弹出表格显示结果，包含两列：
    节点：节点名称
    度数：该节点连接的边数量
可直接查看各节点的连接活跃程度
3. 社区发现分析
在功能菜单中点击 "社区发现分析"
系统自动运行 Louvain 社区检测算法
弹出 "社区分布" 表格，包含三列：
社区ID：社区编号（从 0 开始）
节点数：该社区包含的节点总数
示例节点：显示前 3 个节点名称（超过 3 个显示 "..."）
分析结果自动保存，每个节点新增 community 属性
4. 路径分析
在功能菜单中点击 "路径分析"
在弹出框中输入 起始节点名称，点击 确定
继续输入 目标节点名称，点击 确定
系统显示最短路径结果：
路径步数（边的数量）
完整路径：节点1 → 节点2 → ... → 目标节点
若节点不可达或不存在，会弹出相应提示
图谱局部放大插件 (Graph Zoom Plugin)
使用说明1. 启动插件
在主界面右侧插件列表中，找到 "图谱局部放大工具"
双击或点击 运行，弹出局部放大工具界面
界面分为三个区域：顶部控制面板、左侧图形显示区、右侧信息面板
2. 配置局部放大参数选择中心节点：
在控制面板的 "中心节点" 下拉框中选择要放大的节点
支持输入搜索节点名称
设置邻居层数：
使用 "邻居层数" 数字框设置显示范围（1-5层）
层数越大，显示的节点越多
第1层显示直接邻居，第2层显示邻居的邻居，以此类推
选择边类型模式：
混合模式（默认）：根据边的 is_directed 属性自动判断
有向边显示为红色箭头
无向边显示为蓝色直线
有向边模式：所有边都显示为带箭头的有向边（灰色）
无向边模式：所有边都显示为无箭头的直线（灰色）
显示选项：
勾选 "显示节点标签"：在节点上显示名称
勾选 "显示关系标签"：在边上显示关系类型
3. 执行局部放大
配置完所有参数后，点击 "🔍 放大显示" 按钮
系统自动计算并绘制局部子图，节点按距离分层显示：
红色节点：中心节点（最大）
道奇蓝节点：1层邻居
绿色节点：2层邻居
橙色节点：3层邻居
紫色节点：4层邻居
深粉色节点：5层邻居
右上角显示距离图例
4. 查看分析信息统计信息面板（顶部）：
显示中心节点名称
邻居层数设置
节点总数统计
有向边/无向边数量
各层节点数量分布
中心节点详情（右侧上方）：
节点名称和类型
出度和入度统计
所有出边关系列表（→ 表示有向，— 表示无向）
所有入边关系列表（← 表示有向，— 表示无向）
节点属性详情
邻居节点列表（右侧下方）：
表格展示所有邻居节点信息
列包括：节点名称、类型、距离、关系类型
自动按距离和名称排序
直接邻居显示具体关系和方向
5. 重置视图
点击 "🔄 重置视图" 按钮
返回完整图谱显示
清空信息面板内容
6. 导出子图
完成局部放大后，点击 "💾 导出子图" 按钮
在弹出的文件保存对话框中选择保存位置
默认文件名格式：subgraph_中心节点_层数layers.json
导出内容包括：
中心节点和深度信息
所有子图节点及其属性
所有子图边及其关系类型和方向性
导出的JSON文件可用于后续分析或导入

图谱导航器插件 (Graph Navigator Plugin)
使用说明
1. 启动插件
导航器通常作为侧边栏组件自动显示在主界面右侧
如需手动启动，在插件列表中找到 "图谱导航器"，点击运行
导航器窗口固定尺寸为 280×250 像素
2. 查看图谱概览
导航器显示区域（中央区域）：
显示整个图谱的缩略视图
节点按类型显示不同颜色：
橙色：方剂类节点
浅蓝色：药理类节点
浅绿色：药材类节点
灰色：疾病类节点
蓝色：其他类型节点
灰色线条表示节点之间的关系
红色矩形框：表示当前主视图的可视范围
状态指示器（标题栏右侧）：
绿色圆点 ●：已同步到主视图
黄色圆点 ●：等待网络初始化
橙色圆点 ●：导航器控制中
红色圆点 ●：同步错误
坐标信息（底部显示）：
当前视图中心坐标
当前缩放倍数
节点总数统计
3. 缩放控制
使用缩放滑块：
拖动标题下方的 "缩放" 滑块
范围：0.1x ~ 3.0x（10% ~ 300%）
右侧数字显示当前缩放倍数
主视图会实时跟随缩放变化
缩放时导航器进入控制模式（橙色状态），1秒后恢复同步
4. 快速导航
点击导航：
在导航器中央显示区域点击任意位置
主视图会立即移动到对应的图谱位置
红色视口框会跟随移动到点击位置
拖拽导航：
在导航器显示区域按住鼠标左键拖动
主视图会实时跟随拖动轨迹移动
系统会控制更新频率（每30毫秒最多更新一次）
拖拽结束后0.5秒恢复主视图控制权
5. 视图控制按钮
适应按钮（绿色）：
点击 "适应" 按钮
主视图自动缩放并居中，显示所有节点
系统会自动计算最佳缩放比例
居中按钮（绿色）：
点击 "居中" 按钮
主视图移动到图谱中心位置（坐标 0, 0）
缩放比例重置为 1.0x
刷新按钮（绿色）：
点击 "刷新" 按钮
重新计算节点布局和边界
强制同步主视图状态
适用于图谱数据更新后的刷新
6. 自动同步机制
实时同步：
导航器每秒自动同步一次主视图状态
红色视口框会自动更新位置和大小
缩放滑块会自动跟随主视图缩放
智能控制冲突避免：
导航器操作时暂停主视图同步1秒
拖拽操作时降低同步频率到2秒
操作结束后自动恢复正常同步
避免导航器与主视图的控制冲突
7. 布局计算
自动布局策略：
优先方案：从 vis.js 主视图获取实际节点位置
回退方案：使用 NetworkX Spring 布局算法计算
默认方案：使用圆形布局作为最后备选
布局刷新时机：
插件启动时自动计算
图谱数据更新后需手动刷新
点击刷新按钮强制重新计算

知识图谱搜索插件 (Knowledge Graph Search Plugin)
1. 启动插件
在主界面右侧插件列表中，找到 "知识图谱搜索插件"
双击或点击 运行，弹出搜索对话框（400×600像素）
对话框为非模态窗口，可在搜索的同时操作主界面
2. 配置搜索选项
选择搜索类型：
在顶部 "搜索类型" 下拉框中选择：
全部：同时搜索节点和关系（默认）
仅节点：只在节点名称、类型和属性中搜索
仅关系：只在关系类型和关联节点中搜索
输入搜索关键词：
在搜索框中输入要查找的关键词
支持中文、英文、数字及符号
搜索不区分大小写
支持部分匹配（包含关系）
3. 执行搜索
方式一：点击搜索按钮
输入关键词后点击蓝色 "搜索" 按钮
搜索期间按钮显示"搜索中..."并禁用，防止重复提交
方式二：按回车键
在搜索框中输入关键词
按 Enter 键直接触发搜索
4. 查看搜索结果
结果统计（列表上方）：
显示搜索关键词和结果总数
例如："找到 15 个包含 '麻黄' 的结果"
无结果时显示："未找到包含 'XXX' 的结果"
结果列表（中央区域）：
节点结果（淡蓝色背景）：
格式：📊 节点名称 (节点类型)
第二行显示：连接信息（X入, Y出）
第三行显示：匹配详情（前2项）
关系结果（淡橙色背景）：
格式：🔗 源节点 → 目标节点
第二行显示：关系类型
第三行显示：匹配详情（前2项）
结果排序：
按相关性评分自动排序，最相关的结果显示在最前
评分规则：
节点名称匹配：+10分
关系类型匹配：+8分
源/目标节点匹配：+5分
节点类型匹配：+5分
属性匹配：+3分
5. 定位搜索结果
单击选择：
点击列表中的任意结果项
底部 "在图中定位" 按钮变为可用（绿色）
双击快速定位：
双击列表中的结果项
自动在图谱中定位并高亮显示
手动定位：
单击选中结果项
点击底部绿色 "在图中定位" 按钮
主视图自动跳转并高亮显示
节点定位效果：
节点被选中并高亮显示
视图自动移动到节点位置
缩放比例调整为 1.25x
动画持续 600ms，使用平滑缓动
1.2秒后自动取消选中状态
关系定位效果：
源节点和目标节点同时高亮
视图自动调整以同时显示两个节点
使用 fit 模式确保两节点完全可见
3秒后自动取消选中状态
6. 搜索匹配规则
节点搜索维度：
节点名称：在节点名称中查找关键词（+10分）
节点类型：在节点类型中查找关键词（+5分）
节点属性：在所有属性的键和值中查找（+3分/项）
连接信息：显示节点的入度和出度统计
关系搜索维度：
关系类型：在关系类型名称中查找（+8分）
源节点：在关系起始节点中查找（+5分）
目标节点：在关系终止节点中查找（+5分）
匹配特点：
不区分大小写
支持部分匹配（子串包含）
自动处理 HTML 富文本标签
宽松匹配 id/label/title 字段
7. 其他操作
清除搜索：
点击灰色 "清除" 按钮
清空搜索框内容
清空结果列表
重置统计信息为"准备搜索"
禁用"在图中定位"按钮
关闭窗口：
点击红色 "关闭" 按钮
或点击窗口右上角的 ✕ 按钮
搜索窗口关闭，主界面继续可用
8. 错误处理
常见提示信息：
"请输入搜索关键词"：搜索框为空
"图管理器未初始化"：系统未正确加载
"图数据未加载"：当前没有打开图谱文件
"图形界面未就绪"：主视图尚未完全初始化
"未找到匹配的节点"：定位失败，节点不存在
"定位异常：XXX"：JavaScript执行出错

