import matplotlib.pyplot as plt
import networkx as nx
from matplotlib import rcParams

# 设置字体为SimHei，用于显示中文
rcParams['font.sans-serif'] = ['SimHei']  # 替换为支持中文的字体
rcParams['axes.unicode_minus'] = False  # 避免负号显示问题

# 创建有向图
G = nx.DiGraph()

# 添加三元组关系数据
relations = [
    ("阳气", "生成", "饮食精微"),
    ("阳气", "维持", "体温"),
    ("阳气", "推动", "气血运行"),
    ("阳气", "防御", "外邪"),
    ("阳气", "影响", "腠理开合"),
    ("阳气", "调节", "体温"),
    ("阳气", "促进", "经络通畅"),
    ("阳气", "调节", "津液生成"),
    ("阳气不足", "导致", "虚寒"),
    ("阳气不足", "导致", "气血运行不畅"),
    ("腠理", "控制", "汗液排泄"),
    ("腠理", "开合", "受阳气影响"),
    ("腠理", "抵御", "外邪"),
    ("腠理闭合", "导致", "汗液滞留"),
    ("腠理开放", "导致", "汗液排出"),
    ("腠理", "调节", "体温"),
    ("卫气", "生成", "阳气"),
    ("卫气", "分布", "体表"),
    ("卫气", "抵御", "外邪"),
    ("卫气", "调节", "体温"),
    ("卫气不足", "导致", "表证"),
    ("卫气", "配合", "营气"),
    ("经络", "传导", "气血"),
    ("经络", "调节", "脏腑与四肢"),
    ("经络", "促进", "阳气分布"),
    ("阳气不足", "阻碍", "经络畅通"),
    ("经络阻滞", "导致", "气滞血瘀"),
    ("经络畅通", "维持", "身体健康"),
    ("阳气", "调节", "体温"),
    ("腠理", "控制", "体温"),
    ("体温调节", "依赖", "阳气"),
    ("阳气不足", "导致", "虚寒"),
    ("阳气充足", "保持", "体温稳定"),
    ("腠理闭合", "导致", "发热或寒战"),
    ("营气", "生成", "脾胃运化"),
    ("营气", "滋养", "脏腑"),
    ("营气", "配合", "卫气"),
    ("营气不足", "导致", "脏腑失养"),
    ("营气不足", "导致", "疲乏无力"),
    ("营气", "促进", "气血生成"),
    ("津液", "生成", "水谷精微"),
    ("津液", "滋润", "脏腑"),
    ("津液", "调节", "体液平衡"),
    ("津液不足", "导致", "口干舌燥"),
    ("阳气", "调节", "津液生成"),
    ("津液", "参与", "消化吸收"),
    ("气机", "维持", "气血运行"),
    ("气机", "调节", "脏腑功能"),
    ("阳气", "促进", "气机畅通"),
    ("气机阻滞", "导致", "气滞血瘀"),
    ("气机通畅", "维持", "身体健康"),
    ("气机失调", "导致", "气滞或气逆"),
    ("中焦", "负责", "水湿运化"),
    ("中焦", "运化", "水谷精微"),
    ("阳气", "调节", "中焦运化"),
    ("中焦失调", "导致", "消化不良"),
    ("中焦失调", "导致", "水湿内停"),
    ("阴气", "守护", "阳气"),
    ("阳气", "温煦", "阴气"),
    ("阴气不足", "导致", "阳气失固"),
    ("阴阳平衡", "维持", "体内和谐"),
    ("阳气不足", "导致", "阴盛阳衰"),
    ("泌别清浊", "调节", "水液代谢"),
    ("泌别清浊", "生成", "清者为精"),
    ("泌别清浊", "排泄", "浊者为废物"),
    ("阳气", "促进", "泌别清浊"),
    ("泌别清浊失调", "导致", "水湿停滞"),
    ("寒水", "影响", "阳气"),
    ("寒水", "阻滞", "气血运行"),
    ("阳气不足", "导致", "寒水滞留"),
    ("寒水滞留", "引发", "头痛、恶寒"),
    ("太阳经络", "分布", "体表"),
    ("经络", "联通", "气血运行"),
    ("经界通畅", "促进", "阳气分布"),
    ("经络受阻", "导致", "头痛或四肢酸痛"),
    ("太阳经时", "对应", "白天"),
    ("阳气", "增强", "白天"),
    ("白天", "增强", "阳气防御力"),
    ("阳气不足", "导致", "夜间防御力下降"),
    ("平脉", "表示", "气血运行通畅"),
    ("阳气充足", "维持", "平脉"),
    ("阳气不足", "引发", "脉象浮紧"),
    ("阳气充足", "维持", "身体健康")
]

# 将关系添加到图中
for entity1, relationship, entity2 in relations:
    G.add_edge(entity1, entity2, label=relationship)

# 设置更大的画布尺寸
plt.figure(figsize=(30, 20))

# 设置节点布局，调整 k 值来增加节点之间的距离
pos = nx.spring_layout(G, k=2, seed=42)

# 绘制节点
nx.draw_networkx_nodes(G, pos, node_color='#FFA500', node_size=3000)

# 绘制边
nx.draw_networkx_edges(G, pos, arrowstyle='->', arrowsize=20, edge_color='#606060')

# 绘制节点标签，调整字体大小
nx.draw_networkx_labels(G, pos, font_size=12)

# 绘制边的标签（关系），调整字体大小
edge_labels = nx.get_edge_attributes(G, 'label')
nx.draw_networkx_edge_labels(G, pos, edge_labels=edge_labels, font_color='red', font_size=10)

# 设置标题
plt.title("阳气与太阳生理知识图谱", fontsize=16)

# 隐藏坐标轴
plt.axis('off')

# 显示图，启用交互模式
plt.show(block=False)

